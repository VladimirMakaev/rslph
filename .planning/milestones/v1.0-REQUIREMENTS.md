# Requirements Archive: v1.0 MVP

**Archived:** 2026-01-19
**Status:** SHIPPED

This is the archived requirements specification for v1.0.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: rslph

**Defined:** 2026-01-17
**Core Value:** Autonomous task execution with fresh context per iteration and accumulated learnings

## v1 Requirements

### Commands

- [x] **CMD-01**: `rslph plan <plan>` command transforms idea/plan into structured progress file
- [x] **CMD-02**: `rslph build <plan>` command executes tasks iteratively with fresh context
- [x] **CMD-03**: Basic planning mode (default) — best-effort structuring without user questions
- [x] **CMD-04**: Adaptive planning mode (`--adaptive`) — clarifying questions + testing strategy personas

### Core Loop

- [x] **LOOP-01**: Autonomous iteration loop with configurable max iterations
- [x] **LOOP-02**: Progress persistence — resume after interruption
- [x] **LOOP-03**: Task/story tracking — done vs pending status with checkboxes
- [x] **LOOP-04**: Completion detection via RALPH_DONE marker in progress file
- [x] **LOOP-05**: Max iteration limits with sensible default (stop when exhausted)
- [x] **LOOP-06**: Single iteration mode (`--once`) for step-by-step execution
- [x] **LOOP-07**: Dry-run mode (`--dry-run`) to preview without executing
- [x] **LOOP-08**: Fresh context per iteration — each Claude invocation starts clean
- [x] **LOOP-09**: Recent attempts section (configurable depth) for failure memory

### VCS Integration

- [x] **VCS-01**: Git auto-commit per iteration for rollback safety
- [x] **VCS-02**: Sapling (sl) support as alternative to git
- [x] **VCS-03**: Auto-detect which VCS is in use (git vs sl)

### TUI Interface

- [x] **TUI-01**: Top status bar with iteration X/Y remaining
- [x] **TUI-02**: Top status bar with task X/Y remaining
- [x] **TUI-03**: Link/path to full conversation log
- [x] **TUI-04**: Model display (e.g., "Opus 4.5")
- [x] **TUI-05**: Folder/project name display
- [x] **TUI-06**: Context usage progress bar (visual percentage)
- [x] **TUI-07**: Live Claude output stream in main area
- [x] **TUI-08**: Collapsible conversation threads
- [x] **TUI-09**: Configurable number of recent threads to display
- [x] **TUI-10**: Keyboard navigation for thread expansion/collapse

### Configuration

- [x] **CFG-01**: TOML config file support (`~/.config/rslph/config.toml`)
- [x] **CFG-02**: CLI argument overrides for all config options
- [x] **CFG-03**: Override Claude command path
- [x] **CFG-04**: Override system prompts (plan + build) via file paths
- [x] **CFG-05**: Override shell for notify script execution
- [x] **CFG-06**: Max iterations setting
- [x] **CFG-07**: Recent threads count setting
- [x] **CFG-08**: Notification interval setting (every X iterations)

### System Prompts

- [x] **PROMPT-01**: Baked-in default prompts compiled into binary
- [x] **PROMPT-02**: PROMPT_plan — instructions for task decomposition and clarification
- [x] **PROMPT-03**: PROMPT_build — instructions for task execution and progress updates
- [ ] **PROMPT-04**: User-overridable via `~/.config/rslph/` with paths in config — **DEFERRED TO v1.1**

### Notifications

- [ ] **NOTIF-01**: Notify after 1st iteration — **DEFERRED TO v1.1**
- [ ] **NOTIF-02**: Notify every X iterations (configurable, default 10) — **DEFERRED TO v1.1**
- [ ] **NOTIF-03**: Notify on completion — **DEFERRED TO v1.1**
- [ ] **NOTIF-04**: Notify on failure — **DEFERRED TO v1.1**
- [ ] **NOTIF-05**: Notify via user-provided script executed with configurable shell — **DEFERRED TO v1.1**

### Planning Phase

- [x] **PLAN-01**: Detect input vagueness (for adaptive mode)
- [x] **PLAN-02**: Requirements clarifier persona — surfaces ambiguity (adaptive only)
- [x] **PLAN-03**: Testing strategist persona — determines verification approach (adaptive only)
- [x] **PLAN-04**: Auto-detect project stack for testing strategy
- [x] **PLAN-05**: Multi-layer testing strategy (unit, type-check, static analysis, e2e)
- [x] **PLAN-06**: Output structured progress file ready for build phase

### Verification

- [ ] **VERIF-01**: Testing strategy captured during planning phase — **DEFERRED TO v1.1**
- [ ] **VERIF-02**: Separate test agent persona (not embedded in build loop) — **DEFERRED TO v1.1**
- [ ] **VERIF-03**: Test agent runs verification plan independently — **DEFERRED TO v1.1**

### Progress File Format

- [x] **PROG-01**: Status section with RALPH_DONE marker
- [x] **PROG-02**: Analysis/research section
- [x] **PROG-03**: Task list with phases and checkboxes
- [x] **PROG-04**: Testing strategy section
- [x] **PROG-05**: Completed This Iteration section
- [x] **PROG-06**: Recent Attempts section (last N iterations for memory)
- [x] **PROG-07**: Iteration log for historical record

### Subprocess Management

- [x] **PROC-01**: Pilot Claude CLI as subprocess
- [x] **PROC-02**: Async subprocess with streaming output capture
- [x] **PROC-03**: Graceful Ctrl+C handling (save state, preserve progress)
- [x] **PROC-04**: Timeout handling for stuck Claude invocations

---

## Milestone Summary

**Shipped:** 45 of 54 v1 requirements
**Deferred to v1.1:** 9 requirements (PROMPT-04, NOTIF-01-05, VERIF-01-03)

---
*Archived: 2026-01-19 as part of v1.0 milestone completion*
